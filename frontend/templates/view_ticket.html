{% extends "base.html" %}

{% block title %}Ticket #{{ ticket.id }} - IT Support Portal{% endblock %}

{% block content %}
<div class="d-flex justify-content-between align-items-center mb-4">
    <h2>Ticket #{{ ticket.id }}</h2>
    <div>
        <a href="{{ url_for('dashboard') }}" class="btn btn-secondary">Back to Dashboard</a>
    </div>
</div>

<div class="row">
    <div class="col-md-8">
        <!-- Ticket Details -->
        <div class="card mb-4">
            <div class="card-header">
                <h5 class="mb-0">{{ ticket.title }}</h5>
            </div>
            <div class="card-body">
                <p class="text-muted">
                    Created by {{ ticket.user.username }} on {{ ticket.created_at.strftime('%Y-%m-%d %H:%M') }}
                </p>
                <p>{{ ticket.description }}</p>
            </div>
        </div>
    </div>
    <div class="col-md-4">
        <!-- Ticket Status -->
        <div class="card mb-4">
            <div class="card-header">
                <h5 class="mb-0">Status</h5>
            </div>
            <div class="card-body">
                <form method="POST" action="{{ url_for('update_ticket_status', ticket_id=ticket.id) }}">
                    <div class="mb-3">
                        <select class="form-select" name="status" onchange="this.form.submit()">
                            <option value="open" {% if ticket.status == 'open' %}selected{% endif %}>Open</option>
                            <option value="in_progress" {% if ticket.status == 'in_progress' %}selected{% endif %}>In Progress</option>
                            <option value="resolved" {% if ticket.status == 'resolved' %}selected{% endif %}>Resolved</option>
                            <option value="closed" {% if ticket.status == 'closed' %}selected{% endif %}>Closed</option>
                        </select>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>
{% endblock %} 